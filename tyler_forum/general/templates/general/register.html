{% extends "index.html" %}
    {% block page-content %}
    <h1 class='text-center'>Hi, Buddy please Register </h1>
    <div class='row justify-content-center'>
    <div class='col-sm-4 '>
    <div class='card'><div class='card-body'>
    <form id="register_form" onsubmit="return false" class='form-vertical'>
        {% csrf_token %}
        <div class='form-group'><label class="form-label">First Name</label><input type="text" name="first_name" placeholder="enter your first name" class='form-control'></div>
        <div class='form-group'><label class="form-label">Last Name</label><input type="text" name="last_name" placeholder="enter your last name" class='form-control'></div>
        <div class='form-group'><label class="form-label">Email</label><input type="email" name="email" placeholder="enter your email" class='form-control'></div>
        <div class='form-group'><label class="form-label">Password</label><input type="password" name="password" placeholder="Enter your Password" class='form-control'></div>
        <div class='form-group'><label class="form-label">Confirm Password</label><input type="password" name="cnfm_pass_code" placeholder="confirm your password" class='form-control'></div>
        <div class='form-group'><a href={% url "login" %}>Already have an account? please login</a></div>
        <button id="register" class='btn btn-primary mt-3'>Register</button>
        
        </form></div></div>
    <div id="response"></div></div></div>
{% endblock page-content %}
{% block page-script %}
<script>
    $(document).ready(function(){
        $('#register').click(function(){
    
            $.post('/api/register',$('#register_form').serialize(),function(data){
                if(data.Message===true){
                    $('#response').html('<span style="color:green">User Registerd Successfull, Redirecting to login page</span>')
                    setTimeout(function(){
                        window.location.href='/api/login'
                    },1500)
                    
                }else{
                    $('#response').html("<ul>"+data.Error+"</ul>")
                }
                
            });
        });
    });
   
</script>
{% endblock page-script %}